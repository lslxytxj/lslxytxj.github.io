<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>level 3</title>
    <style>
        body {
            font-family: 'Times New Roman', serif;
            background-color: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: #e0d6b0;
        }
        
        .library {
            position: relative;
            width: 600px;
            height: 400px;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.9)), 
                        url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?w=600&h=400&fit=crop') no-repeat center;
            background-size: cover;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .book {
            width: 180px;
            height: 240px;
            background: linear-gradient(15deg, #8b4513 0%, #a0522d 50%, #8b4513 100%);
            border-radius: 5px 15px 15px 5px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.5),
                        inset 5px 0 10px rgba(255,255,255,0.1);
            position: relative;
            cursor: pointer;
            transition: transform 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .book:hover {
            transform: scale(1.05);
        }
        
        .book-cover {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        
        .book-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px #000;
        }
        
        .book-pages {
            display: none;
            position: absolute;
            width: 100%;
            height: 100%;
            background: #f5f0e1;
            color: #333;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .sequence {
            font-size: 24px;
            margin: 20px 0;
            text-align: center;
        }
        
        .fruit-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-top: 10px;
        }
        
        .fruit-cell {
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            background: #f9f3e6;
            border-radius: 3px;
        }
        
        .input-container {
            margin-top: 20px;
            text-align: center;
        }
        
        input {
            padding: 5px 10px;
            border: 1px solid #8b4513;
            border-radius: 3px;
            background: #f5f0e1;
        }
        
        button {
            margin-top: 10px;
            padding: 5px 15px;
            background: #8b4513;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .page-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .page-btn {
            background: #8b4513;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .page-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .puzzle-image {
            max-width: 100%;
            margin: 15px 0;
            border: 2px solid #8b4513;
            border-radius: 5px;
        }
        
        .locked-content {
            display: none;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="library">
        <div class="book" id="ancientBook">
            <div class="book-cover" id="bookCover">
                <div class="book-title">ç¥ç§˜å¤ä¹¦</div>
                <div>ç‚¹å‡»æ¢ç´¢</div>
            </div>
            
            <div class="book-pages" id="bookPages">
                <div class="page" id="page1">
                    <h2>ç¬¬ä¸€é¡µ</h2>
                    <div class="sequence">1 2 ? 8 16 32â€¦â€¦</div>
                    <div class="page-nav">
                        <button class="page-btn" onclick="prevPage()" disabled>ä¸Šä¸€é¡µ</button>
                        <button class="page-btn" onclick="nextPage()">ä¸‹ä¸€é¡µ</button>
                    </div>
                </div>
                
                <div class="page" id="page2">
                    <h2>ç¬¬äºŒé¡µ</h2>
                    <div class="sequence">0 1 3 ? 9 11 15</div>
                    <div class="page-nav">
                        <button class="page-btn" onclick="prevPage()">ä¸Šä¸€é¡µ</button>
                        <button class="page-btn" onclick="nextPage()">ä¸‹ä¸€é¡µ</button>
                    </div>
                </div>
                
                <div class="page" id="page3">
                    <h2>ç¬¬ä¸‰é¡µ</h2>
                    <p>è§£å¼€è¿™ä¸ªè°œé¢˜ä»¥è§£é”ç¬¬ 3 é¡µ</p>
                    <img src="https://image.wsq127.top/file/qr15scif.png" alt="è°œé¢˜" class="puzzle-image">
                    
                    <div class="input-container">
                        <input type="text" id="iranInput" placeholder="è¾“å…¥ç­”æ¡ˆ...">
                        <button onclick="checkIranPassword()">ç¡®è®¤</button>
                    </div>
                    
                    <div class="locked-content" id="unlockedContent">
                        <p>æ­å–œä½ è§£å¼€äº†è°œé¢˜ï¼</p>
                        <div class="fruit-grid" id="fruitGrid"></div>
                    </div>
                    
                    <div class="page-nav">
                        <button class="page-btn" onclick="prevPage()">ä¸Šä¸€é¡µ</button>
                        <button class="page-btn" onclick="nextPage()" disabled>ä¸‹ä¸€é¡µ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="passwordModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 100; justify-content: center; align-items: center;">
        <div style="background: #f5f0e1; padding: 30px; border-radius: 10px; text-align: center; max-width: 300px;">
            <h2 style="color: #8b4513; margin-top: 0;">è¯·è¾“å…¥æ–‡å­—</h2>
            <input type="text" id="passwordInput" placeholder="è¾“å…¥æ–‡å­—...">
            <div style="margin-top: 20px;">
                <button onclick="checkPassword()">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <script>
        const book = document.getElementById('ancientBook');
        const bookCover = document.getElementById('bookCover');
        const bookPages = document.getElementById('bookPages');
        const passwordModal = document.getElementById('passwordModal');
        const passwordInput = document.getElementById('passwordInput');
        const fruitGrid = document.getElementById('fruitGrid');
        const unlockedContent = document.getElementById('unlockedContent');
        const iranInput = document.getElementById('iranInput');
        
        let currentPage = 1;
        let iranUnlocked = false;
        
        // åˆå§‹åŒ–æ°´æœç½‘æ ¼
        function initFruitGrid() {
            const fruits = ['ğŸ', 'ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸŒ', 'ğŸ‰', 'ğŸ‡', 'ğŸ“', 'ğŸ’', 'ğŸ‘'];
            
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'fruit-cell';
                    
                    // ç¬¬4è¡Œç¬¬5åˆ—æ”¾æŸ æª¬
                    if (i === 3 && j === 4) {
                        cell.textContent = 'ğŸ‹';
                    } else {
                        const randomFruit = fruits[Math.floor(Math.random() * fruits.length)];
                        cell.textContent = randomFruit;
                    }
                    
                    fruitGrid.appendChild(cell);
                }
            }
        }
        
        // æ˜¾ç¤ºæŒ‡å®šé¡µé¢
        function showPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById(`page${pageNum}`).classList.add('active');
            currentPage = pageNum;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.page-btn').forEach(btn => {
                btn.disabled = false;
            });
            
            if (pageNum === 1) {
                document.querySelector('.page-btn:first-child').disabled = true;
            } else if (pageNum === 3) {
                document.querySelector('.page-btn:last-child').disabled = true;
            }
        }
        
        // ä¸‹ä¸€é¡µ
        function nextPage() {
            if (currentPage < 3) {
                showPage(currentPage + 1);
            }
        }
        
        // ä¸Šä¸€é¡µ
        function prevPage() {
            if (currentPage > 1) {
                showPage(currentPage - 1);
            }
        }
        
        // æ£€æŸ¥IRANå¯†ç 
        function checkIranPassword() {
            if (iranInput.value.toUpperCase() === 'IRAN') {
                iranUnlocked = true;
                unlockedContent.style.display = 'block';
                alert('ç­”æ¡ˆæ­£ç¡®ï¼è°œé¢˜å·²è§£å¼€ã€‚');
            } else {
                alert('ç­”æ¡ˆé”™è¯¯ï¼Œè¯·é‡è¯•ï¼');
                iranInput.value = '';
            }
        }
        
        // æ£€æŸ¥å¯†ç 
        function checkPassword() {
            if (passwordInput.value.toLowerCase() === 'æ–‡å­—') {
                bookCover.style.display = 'none';
                bookPages.style.display = 'block';
                passwordModal.style.display = 'none';
                showPage(1);
            } else {
                alert('è¾“å…¥é”™è¯¯ï¼Œè¯·é‡è¯•ï¼');
                passwordInput.value = '';
            }
        }
        
        // ç‚¹å‡»å¤ä¹¦äº‹ä»¶
        book.addEventListener('click', function() {
            if (bookCover.style.display !== 'none') {
                passwordModal.style.display = 'flex';
                passwordInput.focus();
            }
        });
        
        // åˆå§‹åŒ–
        initFruitGrid();
    </script>
</body>
</html>
